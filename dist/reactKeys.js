!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React"),require("ReactDOM")):"function"==typeof define&&define.amd?define(["React","ReactDOM"],t):"object"==typeof exports?exports.ReactKeys=t(require("React"),require("ReactDOM")):e.ReactKeys=t(e.React,e.ReactDOM)}(this,function(e,t){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=22)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e){var r=e.keyCode?e.keyCode:e;if((0,g.catcherWatcher)(r),!p.default.isBlocked(r)){if(T||_(r,"short"),!T||E.getState()[y.NAME].PRESS.press){var n=!0,o=!1,i=void 0;try{for(var u,a=v[Symbol.iterator]();!(n=(u=a.next()).done);n=!0){var c=u.value;c.callback.call(c.context,r)}}catch(e){o=!0,i=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw i}}t.block=T=!0}m||(t.fired=m=!0,t.pressTimeout=S=setTimeout(function(){_(r,"long"),(0,f.updatePressStatus)(!0,r)},y.LONG_PRESS_TIMEOUT))}}function u(){clearTimeout(S),t.block=T=!1,t.fired=m=!1,(0,f.updatePressStatus)(m)}function a(e){t.globalStore=E=e&&e.store?e.store:E,t.rkDebounce=k=e&&e.debounce?e.debounce:y.DEBOUNCE_TIMEOUT,t.eventCb=_=e&&e.eventCb?e.eventCb:function(){return{}},t.userConfig=P=e&&e.config?s({},P,e.config):P,!e||e&&!e.bindkeys?(document.addEventListener("keydown",i),document.addEventListener("keyup",u)):e.bindkeys(i,u)}function c(e,t){var r=Math.random().toString(36).substring(2,10);return v.push({id:r,callback:e,context:t}),r}function l(e){t.keysListeners=v=v.filter(function(t){return t.id!==e})}Object.defineProperty(t,"__esModule",{value:!0}),t.getConfig=t.userConfig=t.rkDebounce=t.eventCb=t.pressTimeout=t.block=t.fired=t.globalStore=t.keysListeners=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.cb=i,t.cbRelease=u,t._init=a,t.addListener=c,t.removeListener=l;var f=r(2),d=r(4),p=n(d),h=r(17),b=n(h),g=r(8),y=r(1),v=t.keysListeners=[],E=t.globalStore={getState:function(){return o({},y.NAME,{})}},m=t.fired=!1,T=t.block=!1,S=t.pressTimeout=null,_=t.eventCb=null,k=t.rkDebounce=y.DEBOUNCE_TIMEOUT,P=t.userConfig=b.default;t.getConfig=function(){return P}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NAME="@@keys",t.C_UP="up",t.C_DOWN="down",t.C_LEFT="left",t.C_RIGHT="right",t.EXIT_STRATEGY_MIRROR="mirror",t.EXIT_STRATEGY_START="start",t.EXIT_STRATEGY_MEMORY="memory",t.BINDER_TYPE="binder",t.CAROUSEL_TYPE="carousel",t.LONG_PRESS_TIMEOUT=500,t.DEBOUNCE_TIMEOUT=10,t.VERTICAL="vertical",t.NAVIGATION_CENTER="center",t.NAVIGATION_BOUND="bound"},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){(0,S.ensureDispatch)();var r=e.id,o=e.active,i=e.circular,a=e.size,c=e.index,l=e.elements;return(0,S.isUnmountedBinder)(r)?void y.globalStore.dispatch({type:P,newBinder:n({},r,{id:r,type:t,active:o,circular:i,size:a,index:c,elements:l||[]})}):void(e.active&&u(r,c))}function i(e,t){(0,S.ensureDispatch)();var r=y.globalStore.getState()[T.NAME];if(!(0,S.isUnmountedBinder)(e.id))return void(e.active&&u(e.id));var o=e.id,i=e.active,a=e.selector,c=e.gap,l=e.boundedGap,s=e.topGap,f=e.rightGap,p=e.elements,h=e.leftGap,b=e.downGap,g=e.enterStrategy,v=e.position;y.globalStore.dispatch({type:P,inactiveBinders:i?d(r,o):{},newBinder:n({},o,{id:o,active:i,type:t,selector:a,gap:c,boundedGap:l,topGap:s,rightGap:f,leftGap:h,downGap:b,enterStrategy:g,position:v,elements:p||[],prevEl:null,prevDir:null,nextEl:null,hasMoved:!1,marginLeft:0,marginTop:0})})}function u(e,t,r){(0,S.ensureDispatch)(),(0,S.ensureMountedBinder)(e);var n=y.globalStore.getState()[T.NAME],o=n[e],i=(0,v.findIdByStrategy)(n,e,t);y.globalStore.dispatch({type:k,binderId:e,inactiveBinders:d(n,e)}),o&&o.type===T.CAROUSEL_TYPE?a(e,i,r):c(e,i,r)}function a(e,t){(0,S.ensureDispatch)(),(0,S.ensureMountedBinder)(e);var r=y.globalStore.getState()[T.NAME][e],n=r.elements,o=r.selectedId;if(0!==n.length){var i=t||n[0].id,u={selectedId:i,hasMoved:!0,prevEl:n.find(function(e){return e.id===o}),nextEl:n.find(function(e){return e.id===i}),prevDir:null};l(e,u)}}function c(e,t){(0,S.ensureDispatch)(),(0,S.ensureMountedBinder)(e);var r=y.globalStore.getState()[T.NAME][e],n=r.elements,o=r.selectedId,i=t||n[0].id;if(0!==n.length){var u=(0,E.boundsMargin)(i,r),a={selectedId:i,hasMoved:!0,prevEl:n.find(function(e){return e.id===o}),nextEl:n.find(function(e){return e.id===i}),prevDir:null,marginLeft:u.marginLeft,marginTop:u.marginTop};l(e,a)}}function l(e,t){(0,S.ensureDispatch)(),(0,S.ensureMountedBinder)(e);var r=y.globalStore.getState()[T.NAME][e].active;y.globalStore.dispatch({type:O,binderId:e,state:t}),r&&y.globalStore.dispatch({type:A,binderId:e,selectedId:t.selectedId})}function s(e,t){(0,S.ensureDispatch)(),(0,S.ensureMountedBinder)(e);var r=(0,E.boundsMargin)(t,y.globalStore.getState()[T.NAME][e]);y.globalStore.dispatch({type:I,binderId:e,selectedId:t,marginLeft:r.marginLeft,marginTop:r.marginTop})}function f(e,t){(0,S.ensureDispatch)(),(0,S.ensureMountedBinder)(e),b(e);var r=(0,E.correctBoundsMargin)(t,y.globalStore.getState()[T.NAME][e]);y.globalStore.dispatch({type:I,binderId:e,selectedId:t,marginLeft:r.marginLeft,marginTop:r.marginTop})}function d(e,t){var r={};return Object.keys(e).map(function(n){"current"!==n&&"PRESS"!==n&&n!==t&&"keys"!==e[n].type&&(r[n]=g({},e[n],{active:!1}))}),r}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(0,S.ensureDispatch)(),y.globalStore.getState()[T.NAME].PRESS.press!==e&&y.globalStore.dispatch({type:M,press:e,keyCode:t})}function h(e,t,r,n,o){(0,S.ensureDispatch)(),(0,S.ensureMountedBinder)(e);var i=y.globalStore.getState()[T.NAME][e],u=i.nextEl,a=i.prevEl,c=i.prevDir,l=i.elements,f=(0,m.calculateNewState)(t,u,a,c,l);y.globalStore.dispatch({type:O,binderId:e,state:f}),f.hasMoved?(s(e,f.nextEl.id,t),(0,_.execCb)(r,u,o)):(b(e),(0,_.enterTo)(n))}function b(e){(0,S.ensureDispatch)(),(0,S.ensureMountedBinder)(e);var t=y.globalStore.getState()[T.NAME][e].enterStrategy;t!==T.EXIT_STRATEGY_MEMORY&&y.globalStore.dispatch({type:O,binderId:e,state:{prevDir:null}})}Object.defineProperty(t,"__esModule",{value:!0}),t.RESET_BINDER=t.UPDATE_PRESS_STATUS=t.UPDATE_CURRENT=t.UPDATE_BINDER_STATE=t.UPDATE_BINDER_SELECTED_KEY=t.ADD_BINDER_TO_STORE=t.ACTIVATE_BINDER=void 0;var g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.addCarouselToStore=o,t.addBinderToStore=i,t._activeBinder=u,t._resetCarousel=a,t._resetBinder=c,t._updateBinder=l,t.updateBinderSelectedId=s,t.updatePosition=f,t.desactivateBinders=d,t.updatePressStatus=p,t.determineNewState=h,t.resetFlipFlop=b;var y=r(0),v=r(20),E=r(9),m=r(3),T=r(1),S=r(10),_=r(5),k=t.ACTIVATE_BINDER=[T.NAME,"/ACTIVATE_BINDER"].join(""),P=t.ADD_BINDER_TO_STORE=[T.NAME,"/ADD_BINDER_TO_STORE"].join(""),I=t.UPDATE_BINDER_SELECTED_KEY=[T.NAME,"/UPDATE_BINDER_SELECTED_KEY"].join(""),O=t.UPDATE_BINDER_STATE=[T.NAME,"/UPDATE_BINDER_STATE"].join(""),A=t.UPDATE_CURRENT=[T.NAME,"/UPDATE_CURRENT"].join(""),M=t.UPDATE_PRESS_STATUS=[T.NAME,"/UPDATE_PRESS_STATUS"].join("");t.RESET_BINDER=[T.NAME,"/RESET_BINDER"].join("")},function(e,t,r){"use strict";function n(e){if(e){var t=e.getBoundingClientRect(),r=t.left,n=t.top,o=t.width,i=t.height;return{id:e.id,width:o,height:i,left:r,top:n,down:n+i,right:r+o}}}function o(e){return Math.max.apply(null,e.map(function(e){return e.coords.down}))}function i(e){return Math.max.apply(null,e.map(function(e){return e.coords.right}))}function u(e,t){return[].slice.call(e.querySelectorAll(t))}function a(e){return document.getElementById(e)}function c(e,t){if(0===e.length)return!1;if(0===t.length||t.length!==e.length)return!0;for(var r=!1,n=0,o=Math.min(e.length,t.length);n<o&&!r;){var i=e[n].id||e[n].props.id,u=t[n].id||t[n].props.id;r=i!==u,n++}return r}function l(e,t,r,n){var o=!1,i=r,u=t,a=null;switch(e){case f.C_UP:a=n===f.C_DOWN?f.C_UP:null;break;case f.C_RIGHT:a=n===f.C_LEFT?f.C_RIGHT:null;break;case f.C_DOWN:a=n===f.C_UP?f.C_DOWN:null;break;case f.C_LEFT:a=n===f.C_RIGHT?f.C_LEFT:null}if(a){o=!0;var c=r;i=t,u=c}else a=n;return{hasMoved:o,nextEl:u,prevEl:i,prevDir:a}}function s(e,t,r,n,o){var i=!1,u=t,a=r,c=n,s=l(e,t,r,n);if(!s.hasMoved){var f=t;f[e]&&(u=o.find(function(t){return t.id===f[e]})),u.id!==f.id&&(i=!0,a=f,c=e),s={hasMoved:i,nextEl:u,prevEl:a,prevDir:c}}return s}Object.defineProperty(t,"__esModule",{value:!0}),t.calculateElSpace=n,t.downLimit=o,t.rightLimit=i,t.getCurrentChildren=u,t.getDomElement=a,t.hasDiff=c,t.flipflop=l,t.calculateNewState=s;var f=r(1)},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),u=function(){function e(){o(this,e),this.blockedStuff=[],this.generalBlock=!1,this.block=this.block.bind(this),this.unblock=this.unblock.bind(this),this.blockExcept=this.blockExcept.bind(this),this.unblockExcept=this.unblockExcept.bind(this),this.isBlocked=this.isBlocked.bind(this)}return i(e,[{key:"block",value:function(){this.blockedStuff=[];var e=Array.prototype.slice.call(arguments);if(e.length>0){this.generalBlock=!1;var t=!0,r=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(t=(i=u.next()).done);t=!0){var a=i.value;a instanceof Array?(this.blockedStuff=this.blockedStuff.concat(a),this.blockedStuff=[].concat(n(new Set(this.blockedStuff)))):this.blockedStuff.indexOf(a)===-1&&this.blockedStuff.push(a)}}catch(e){r=!0,o=e}finally{try{!t&&u.return&&u.return()}finally{if(r)throw o}}}else this.generalBlock=!0}},{key:"blockExcept",value:function(){this.generalBlock=!0,this.blockedStuff=[];var e=Array.prototype.slice.call(arguments),t=!0,r=!1,o=void 0;try{for(var i,u=e[Symbol.iterator]();!(t=(i=u.next()).done);t=!0){var a=i.value;a instanceof Array?(this.blockedStuff=this.blockedStuff.concat(a),this.blockedStuff=[].concat(n(new Set(this.blockedStuff)))):this.blockedStuff.indexOf(a)===-1&&this.blockedStuff.push(a)}}catch(e){r=!0,o=e}finally{try{!t&&u.return&&u.return()}finally{if(r)throw o}}}},{key:"unblockExcept",value:function(){this.generalBlock=!1;var e=Array.prototype.slice.call(arguments);if(!(e.length>0))throw new Error("unblockExcept need at least on arg, maybe you want to just unblock()");this.block.apply(this,n(e))}},{key:"unblock",value:function(){this.generalBlock=!1;var e=Array.prototype.slice.call(arguments);if(e.length>0){var t=!0,r=!1,n=void 0;try{for(var o,i=e[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var u=o.value;if(u instanceof Array){var a=!0,c=!1,l=void 0;try{for(var s,f=u[Symbol.iterator]();!(a=(s=f.next()).done);a=!0){var d=s.value;this.blockedStuff.indexOf(d)!==-1&&this.blockedStuff.splice(this.blockedStuff.indexOf(d),1)}}catch(e){c=!0,l=e}finally{try{!a&&f.return&&f.return()}finally{if(c)throw l}}}else this.blockedStuff.indexOf(u)!==-1&&this.blockedStuff.splice(this.blockedStuff.indexOf(u),1)}}catch(e){r=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(r)throw n}}}else this.blockedStuff=[]}},{key:"isBlocked",value:function(e){return!this.generalBlock&&this.blockedStuff.indexOf(e)!==-1||this.generalBlock&&this.blockedStuff.indexOf(e)===-1}},{key:"getStuff",value:function(){return this.blockedStuff}},{key:"isGeneralBlocked",value:function(){return this.generalBlock}}]),e}();t.default=new u},function(e,t,r){"use strict";function n(e,t,r){e&&e.call(r,t||{})}function o(e){e&&("string"==typeof e?(0,i._activeBinder)(e):e())}Object.defineProperty(t,"__esModule",{value:!0}),t.execCb=n,t.enterTo=o;var i=r(2)},function(t,r){t.exports=e},function(e,t,r){"use strict";function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.rkDebounce;u=!0,setTimeout(function(){return u=!1},e)}function o(){return u}Object.defineProperty(t,"__esModule",{value:!0}),t.block=n,t.isBlocked=o;var i=r(0),u=!1},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e){var t=String.fromCharCode(e),r=!0,n=!1,o=void 0;try{for(var i,u=p[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var a=i.value;a.history+=t,a.history.length>a.sequence.length&&(a.history=a.history.slice(1)),a.history.toUpperCase()===a.sequence.toUpperCase()&&(a.history=[],a.cb())}}catch(e){n=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(n)throw o}}}function c(e,t){var r=Math.random().toString(36).substring(2,10);return p.push({id:r,sequence:e,cb:t,history:[]}),r}function l(e){p=p.filter(function(t){return t.id!==e})}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.catcherWatcher=a,t.addCatcher=c,t.removeCatcher=l;var f=r(6),d=n(f),p=[];t.default=function(e,t){return function(r){return function(n){function a(){return o(this,a),i(this,(a.__proto__||Object.getPrototypeOf(a)).apply(this,arguments))}return u(a,n),s(a,[{key:"componentDidMount",value:function(){var r=this,n=this.props;this.id=c(e,function(){return t.call(r,n)})}},{key:"componentWillUnmount",value:function(){l(this.id)}},{key:"render",value:function(){return d.default.createElement(r,this.props)}}]),a}(f.Component)}}},function(e,t,r){"use strict";function n(e,t){var r=t.wrapper,n=t.elements,o=t.marginLeft,i=t.marginTop,u=t.gap,a=t.boundedGap,c=t.topGap,l=t.leftGap,p=n.find(function(t){return t.id===e}),h=(0,g.calculateElSpace)(document.getElementById(e));return{marginLeft:f(r,h)?o:b(r,p,u,a,l),marginTop:s(r,h)?i:d(r,p,u,a,c)}}function o(e,t){var r=t.wrapper,n=t.elements,o=t.marginLeft,s=t.marginTop,f=t.downLimit,y=t.rightLimit,v=t.gap,E=t.boundedGap,m=t.topGap,T=t.rightGap,S=t.leftGap,_=t.downGap,k=t.selectedId,P=o,I=s;if(k===e)return{marginLeft:P,marginTop:I};var O=document.getElementById(k),A=document.getElementById(e);if(!O||!A||!r)return{marginLeft:P,marginTop:I};var M=n.find(function(t){return t.id===e}),C=(0,g.calculateElSpace)(O),w=(0,g.calculateElSpace)(A),B=i(C,w);return"left"!==B.horizontal||c(r,w,v)?"right"!==B.horizontal&&"equal"!==B.horizontal||l(r,w,v)||(P=h(r,M,v,y,E,T)):P=b(r,M,v,E,S),"top"!==B.vertical||u(r,w,v)?"down"!==B.vertical&&"equal"!==B.horizontal||a(r,w,v)||(I=p(r,M,v,f,E,_,s)):I=d(r,M,v,E,m),{marginLeft:P,marginTop:I}}function i(e,t){var r="equal",n="equal";return e.left>t.left?n="left":e.left<t.left&&(n="right"),e.top>t.top?r="top":e.top<t.top&&(r="down"),{vertical:r,horizontal:n}}function u(e,t,r){return t.top>=e.top+r}function a(e,t,r){return e.down>=t.down+r}function c(e,t,r){return t.left>=e.left+r}function l(e,t,r){return e.right>=t.right+r}function s(e,t){return u(e,t,0)&&a(e,t,0)}function f(e,t){return c(e,t,0)&&l(e,t,0)}function d(e,t,r,n,o){var i=t.coords.top,u=n||o,a=i-(e.top+u)<0,c=i-(a?u:r),l=c-e.top;return l<0&&!a?0:-l}function p(e,t,r,n,o,i){var u=t.coords.down,a=o||i,c=u+a>n,l=u+(c?a:r);return l>n&&!c?-(n-e.down):-(l-e.down)}function h(e,t,r,n,o,i){var u=t.coords.right,a=o||i,c=u+a>n,l=u+(c?a:r);return l>n&&!c?-(n-e.right):-(l-e.right)}function b(e,t,r,n,o){var i=t.coords.left,u=n||o,a=i-(e.left+u)<0,c=i-(a?u:r),l=c-e.left;return l<0&&!a?0:-l}Object.defineProperty(t,"__esModule",{value:!0}),t.correctBoundsMargin=n,t.boundsMargin=o,t.determineGeo=i,t.isInsideTop=u,t.isInsideDown=a,t.isInsideLeft=c,t.isInsideRight=l,t.isVerticalInside=s,t.isHorizontalInside=f,t.calculMarginOnTop=d,t.calculMarginOnDown=p,t.calculMarginOnRight=h,t.calculMarginOnLeft=b;var g=r(3)},function(e,t,r){"use strict";function n(){if(!a.globalStore.getState()[c.NAME])throw new Error(l+"keys state not present un global state")}function o(){if(!a.globalStore.dispatch)throw new Error(l+"You better have Redux to use this feature")}function i(e){if(!Object.keys(a.globalStore.getState()[c.NAME]).some(function(t){return e===t}))throw new Error(l+"You cannot activate a unmounted binder ("+e+").")}function u(e){return!Object.keys(a.globalStore.getState()[c.NAME]).some(function(t){return e===t})}Object.defineProperty(t,"__esModule",{value:!0}),t.ensureState=n,t.ensureDispatch=o,t.ensureMountedBinder=i,t.isUnmountedBinder=u;var a=r(0),c=r(1),l="[react-keys] - "},function(e,t,r){"use strict";function n(e){var t=e.id,r=e.active,n=i.globalStore.getState();return n[o.NAME]&&n[o.NAME][t]?!!n[o.NAME][t].active:!!r}Object.defineProperty(t,"__esModule",{value:!0}),t.isActive=n;var o=r(1),i=r(0)},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(6),l=n(c),s=r(21),f=n(s),d=r(19),p=r(1),h=r(7),b=r(4),g=n(b),y=r(11),v=r(5),E=r(0),m=r(2),T=r(3),S=function(e){function t(e){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.listenerId=(0,E.addListener)(r.keysHandler,r),r}return u(t,e),a(t,null,[{key:"propTypes",get:function(){return{id:c.PropTypes.string.isRequired,children:l.default.PropTypes.oneOfType([l.default.PropTypes.object,l.default.PropTypes.array]),selector:c.PropTypes.string,position:c.PropTypes.string,wrapper:c.PropTypes.string,filter:c.PropTypes.string,gap:c.PropTypes.number,boundedGap:c.PropTypes.number,topGap:c.PropTypes.number,rightGap:c.PropTypes.number,leftGap:c.PropTypes.number,downGap:c.PropTypes.number,enterStrategy:c.PropTypes.string,active:c.PropTypes.bool,onRight:c.PropTypes.func,onLeft:c.PropTypes.func,onUp:c.PropTypes.func,onDown:c.PropTypes.func,onEnter:c.PropTypes.func,debounce:c.PropTypes.number,onLeftExit:c.PropTypes.oneOfType([c.PropTypes.string,c.PropTypes.func]),onRightExit:c.PropTypes.oneOfType([c.PropTypes.string,c.PropTypes.func]),onUpExit:c.PropTypes.oneOfType([c.PropTypes.string,c.PropTypes.func]),onDownExit:c.PropTypes.oneOfType([c.PropTypes.string,c.PropTypes.func])}}},{key:"defaultProps",get:function(){return{selector:"li",active:!0,enterStrategy:"none",filter:null,gap:20,boundedGap:0,topGap:0,rightGap:0,leftGap:0,downGap:0}}}]),a(t,[{key:"keysHandler",value:function(e){if((0,y.isActive)(this.props)&&!(0,h.isBlocked)()&&!g.default.isBlocked(this.props.id)){var t=this.props,r=t.id,n=t.onLeft,o=t.onLeftExit,i=t.onUp,u=t.onUpExit,a=t.onRight,c=t.onRightExit,l=t.onDown,s=t.onDownExit,f=t.onEnter,d=E.globalStore.getState()["@@keys"][r].nextEl;switch(e){case E.userConfig.left:this.performAction(p.C_LEFT,n,o);break;case E.userConfig.up:this.performAction(p.C_UP,i,u);break;case E.userConfig.right:this.performAction(p.C_RIGHT,a,c);break;case E.userConfig.down:this.performAction(p.C_DOWN,l,s);break;case E.userConfig.enter:f&&((0,h.block)(),(0,v.execCb)(f,d,this))}}}},{key:"performAction",value:function(e,t,r){var n=this.props,o=n.id,i=n.debounce;(0,h.block)(i),(0,m.determineNewState)(o,e,t,r,this)}},{key:"refreshState",value:function(){var e=f.default.findDOMNode(this),t=this.props,r=t.id,n=t.filter,o=t.wrapper,i=E.globalStore.getState()[p.NAME][r],u=(0,d.refresh)(e,i.elements,i.selector,i.selectedId,{filter:n,marginLeft:i.marginLeft,marginTop:i.marginTop}),a=u.elements,c=u.selectedElement;(0,T.hasDiff)(a,i.elements)&&((0,m._updateBinder)(r,{wrapper:(0,T.calculateElSpace)(o?document.querySelector(o):document.body),downLimit:(0,T.downLimit)(a),rightLimit:(0,T.rightLimit)(a),elements:a,nextEl:c||{},selectedId:c.id}),(0,m.updatePosition)(r,c.id))}},{key:"componentDidMount",value:function(){(0,m.addBinderToStore)(this.props,p.BINDER_TYPE),this.refreshState()}},{key:"componentDidUpdate",value:function(){this.refreshState()}},{key:"componentWillUnmount",value:function(){(0,E.removeListener)(this.listenerId)}},{key:"render",value:function(){return l.default.createElement("div",{id:this.props.id},this.props.children)}}]),t}(c.Component);t.default=S},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=r(6),s=n(l),f=r(18),d=r(9),p=r(3),h=r(0),b=r(7),g=r(11),y=r(5),v=r(2),E=r(1),m=function(e){function t(e){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.listenerId=(0,h.addListener)(r.keysHandler,r),r.timeout=null,r.movingCountDown=function(){return r.timeout=setTimeout(function(){return(0,v._updateBinder)(e.id,{moving:!1,selectedId:r.selectedId})},e.speed)},r.state={cursor:e.index,elements:[]},r}return u(t,e),c(t,null,[{key:"propTypes",get:function(){return{children:s.default.PropTypes.oneOfType([s.default.PropTypes.object,s.default.PropTypes.array]),id:l.PropTypes.string.isRequired,active:l.PropTypes.bool,index:l.PropTypes.number,size:l.PropTypes.number,speed:l.PropTypes.number,debounce:l.PropTypes.number,elWidth:l.PropTypes.number,navigation:l.PropTypes.string,circular:l.PropTypes.bool,gap:l.PropTypes.number,className:l.PropTypes.string,childrenClassName:l.PropTypes.string,onChange:l.PropTypes.func,onDownExit:l.PropTypes.func,onUpExit:l.PropTypes.func,onEnter:l.PropTypes.func,updateIndex:l.PropTypes.bool}}},{key:"defaultProps",get:function(){return{index:0,size:3,elWidth:100,circular:!0,active:!0,speed:100,gap:0,navigation:E.NAVIGATION_CENTER,debounce:82,className:"carousel",childrenClassName:"carousel-child",updateIndex:!1}}}]),c(t,[{key:"computeChildren",value:function(e){var t=e;"[object Array]"!==Object.prototype.toString.call(e)&&(t=[e]);for(var r=1;t.length<=this.props.size+4;){var n=t.map(function(e){var t=a({},e.props,{id:e.props.id+"_"+r});return a({},e,{props:t,key:e.props.id+"_"+r})});t=t.concat(n),r++}return t}},{key:"keysHandler",value:function(e){var t=this.props,r=t.children,n=t.circular,o=t.onDownExit,i=t.onUpExit,u=t.onEnter,a=this.state.cursor;if((0,g.isActive)(this.props)&&!(0,b.isBlocked)())switch(e){case h.userConfig.left:if(!n&&0===a)return;this.performAction((0,f.getPrev)(r.length,a));break;case h.userConfig.right:if(!n&&a===r.length-1)return;this.performAction((0,f.getNext)(r.length,a));break;case h.userConfig.down:this.performCallback(o);break;case h.userConfig.up:this.performCallback(i);break;case h.userConfig.enter:this.performCallback(u)}}},{key:"isLeftMove",value:function(e,t,r){return t<e||0===e&&t===r.length-1}},{key:"componentWillMount",value:function(){(0,v.addCarouselToStore)(this.props,E.CAROUSEL_TYPE),this.updateState(this.state.cursor,this.props.children)}},{key:"componentWillUpdate",value:function(e){var t=e.index,r=e.children,n=e.updateIndex;if((0,p.hasDiff)(r,this.props.children)||this.props.index!==t){var o=n?t:this.state.cursor;this.updateState(o,r)}}},{key:"performAction",value:function(e){var t=this.props,r=t.debounce,n=t.onChange,o=t.children;(0,b.block)(r),clearTimeout(this.timeout),this.updateState(e,o),this.movingCountDown(),(0,y.execCb)(n,this.selectedId,this)}},{key:"updateState",value:function(e,t){var r=this.computeChildren(t),n=this.props,o=n.id,i=n.size,u=n.circular;if(r[e]){this.selectedId=r[e].props.id,(0,v._updateBinder)(o,{selectedId:this.selectedId,cursor:e,moving:!0});var a=(0,f.build)(r,i+4,e,u);this.setState({cursor:e,elements:a,gaps:this.determineGap(a,this.isLeftMove(this.state.cursor,e,a))})}}},{key:"performCallback",value:function(e){e&&((0,b.block)(),(0,y.execCb)(e,this.selectedId,this))}},{key:"determineGap",value:function(e,t){var r=this.props,n=r.navigation,o=r.id,i=r.elWidth,u=r.size,a=r.gap,c=this.state.gaps,l=c||e.map(function(e,t){return(t-(n===E.NAVIGATION_BOUND?u:2))*i+a});if(n===E.NAVIGATION_BOUND){var s=(0,p.calculateElSpace)(document.getElementById(this.selectedId));if(!s)return l;var f=(0,p.calculateElSpace)(document.getElementById(o));return!t&&(0,d.isInsideRight)(f,s,a)?l.map(function(e){return e+i}):t&&(0,d.isInsideLeft)(f,s,a)?l.map(function(e){return e-i}):l}return l}},{key:"render",value:function(){var e=this.props,t=e.size,r=e.elWidth,n=e.childrenClassName,o=e.className,i=e.id,u=this.state,a=u.elements,c=u.gaps;return s.default.createElement("div",{id:i,className:o,style:{overflow:"hidden",position:"absolute"}},a.map(function(e,o){if(e){var i=c[o];return s.default.createElement("div",{key:e.props.id,className:n,style:{marginLeft:i+"px",position:"absolute",width:r+"px",display:"block",opacity:i===-(2*r)||i===(t+1)*r?0:1}},e)}}))}},{key:"componentWillUnmount",value:function(){(0,h.removeListener)(this.listenerId)}}]),t}(l.Component);t.default=m},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=r(6),l=n(c),s=r(7),f=r(0),d=r(4),p=n(d),h=r(5),b=function(e){function t(e){o(this,t);var r=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.listenerId=(0,f.addListener)(r.keysHandler,r),r}return u(t,e),a(t,null,[{key:"propTypes",get:function(){return{children:l.default.PropTypes.oneOfType([l.default.PropTypes.object,l.default.PropTypes.array]),id:c.PropTypes.string.isRequired,debounce:c.PropTypes.number,active:c.PropTypes.bool}}},{key:"defaultProps",get:function(){return{active:!0}}}]),a(t,[{key:"isActive",value:function(){return this.props.active&&!(0,s.isBlocked)()&&!p.default.isBlocked(this.props.id)}},{key:"keysHandler",value:function(e){if(this.isActive())for(var t in f.userConfig){var r=f.userConfig[t],n=t.toLowerCase().replace(/\b[a-z](?=[a-z]{1})/g,function(e){return e.toUpperCase()});if(Number.isInteger(r)&&r===e||Array.isArray(r)&&r.indexOf(e)!==-1){this.performAction(this.props["on"+n],e);break}}}},{key:"performAction",value:function(e,t){var r=this.props.debounce;e&&((0,s.block)(r),(0,h.execCb)(e,t,this))}},{key:"componentWillUnmount",value:function(){(0,f.removeListener)(this.listenerId)}},{key:"render",value:function(){return this.props.children||null}}]),t}(c.Component);t.default=b},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a,r=arguments[1];switch(r.type){case u.ADD_BINDER_TO_STORE:return i({},t,r.inactiveBinders,r.newBinder);case u.ACTIVATE_BINDER:return i({},t,r.inactiveBinders,n({},r.binderId,i({},t[r.binderId],{active:!0})));case u.UPDATE_BINDER_STATE:return i({},t,n({},r.binderId,i({},t[r.binderId],r.state)));case u.RESET_BINDER:return i({},t,n({},r.binderId,i({},t[r.binderId],{selectedId:r.selectedId,nextEl:t[r.binderId].elements.find(function(e){return e.id===r.selectedId})})));case u.UPDATE_BINDER_SELECTED_KEY:return i({},t,(e={},n(e,r.binderId,i({},t[r.binderId],{selectedId:r.selectedId,marginLeft:r.marginLeft,marginTop:r.marginTop})),n(e,"current",i({},t.current,{binderId:r.binderId,selectedId:r.selectedId})),e));case u.UPDATE_CURRENT:return i({},t,{current:i({},t.current,{binderId:r.binderId,selectedId:r.selectedId})});case u.UPDATE_PRESS_STATUS:return i({},t,{PRESS:{press:r.press,keyCode:r.keyCode}});case"RESET_STATE":return a;default:return t}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t._keyReducer=o;var u=r(2),a={current:{selectedId:null,binderId:null},PRESS:{press:!1}}},function(e,t,r){"use strict";function n(e){return(0,f.ensureState)(),function(){return l.globalStore.getState()[s.NAME][e]||{marginLeft:0,marginTop:0}}}function o(e){(0,f.ensureState)();var t=l.globalStore.getState().current&&l.globalStore.getState().current.binderId;return function(){return t===e}}function i(e){return(0,f.ensureState)(),function(){return l.globalStore.getState()[s.NAME][e]?l.globalStore.getState()[s.NAME][e].selectedId:""}}function u(e){return(0,f.ensureState)(),function(){return l.globalStore.getState()[s.NAME][e]?l.globalStore.getState()[s.NAME][e].marginLeft:0}}function a(e){return(0,f.ensureState)(),function(){return l.globalStore.getState()[s.NAME][e]?l.globalStore.getState()[s.NAME][e].marginTop:0;
}}function c(e){return(0,f.ensureState)(),function(){return l.globalStore.getState()[s.NAME][e]&&l.globalStore.getState()[s.NAME][e].active}}Object.defineProperty(t,"__esModule",{value:!0}),t._selector=n,t._isCurrentBinder=o,t._getBinderSelectedId=i,t._getBinderMarginLeft=u,t._getBinderMarginTop=a,t._isBinderActive=c;var l=r(0),s=r(1),f=r(10)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={left:37,up:38,right:39,down:40,enter:13}},function(e,t,r){"use strict";function n(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return r||0!==t&&null!==t?t>0?t-1:e-1:null}function o(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return r||null!==t&&t!==e-1?t<e-1?t+1:0:null}function i(e,t,r){for(var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],u=[e[r]],a=Math.floor(t/2),c=r,l=r,s=0;s<a;s++)l=o(e.length,l,i),c=n(e.length,c,i),u.push(null!==l?e[l]:null),u.unshift(null!==c?e[c]:null);return u}Object.defineProperty(t,"__esModule",{value:!0}),t.getPrev=n,t.getNext=o,t.build=i},function(e,t,r){"use strict";function n(e,t){var r=e.filter(function(e){return""!==e.id}).filter(function(e){return[].slice.call(e.classList).indexOf(t.filter)===-1}).map(c.calculateElSpace);return r.map(function(e){return{id:e.id,coords:a({},e,{right:e.right-t.marginLeft,left:e.left-t.marginLeft,top:e.top-t.marginTop,down:e.down-t.marginTop}),left:p(s(e,r)),right:p(l(e,r)),up:p(d(e,r)),down:p(f(e,r))}})}function o(e,t){var r=e.querySelectorAll(t);return[].slice.call(r)}function i(e,t){var r=t?e.find(function(e){return e.id===t}):null;return r||e[0]}function u(e,t,r,u,a){var l=o(e,r),s=t;return(0,c.hasDiff)(l,t)&&(s=n(l,a)),{elements:s,selectedElement:i(s,u)}}Object.defineProperty(t,"__esModule",{value:!0}),t.calculDowScore=t.calculUpScore=t.calculLeftScore=t.calculRightScore=t.elementSort=t.findElement=t.upArray=t.downArray=t.leftArray=t.rightArray=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.build=n,t.createList=o,t.selectedElement=i,t.refresh=u;var c=r(3),l=t.rightArray=function(e,t){return t.filter(function(t){return e.right<=t.left}).sort(h(e,b))},s=t.leftArray=function(e,t){return t.filter(function(t){return e.left>=t.right}).sort(h(e,g))},f=t.downArray=function(e,t){return t.filter(function(t){return e.down<=t.top}).sort(h(e,v))},d=t.upArray=function(e,t){return t.filter(function(t){return e.top>=t.down}).sort(h(e,y))},p=t.findElement=function(e){return e[0]?e[0].id:void 0},h=t.elementSort=function(e,t){return function(r,n){return t(r,e)-t(n,e)}},b=t.calculRightScore=function(e,t){return Math.abs(e.top-t.top)+Math.abs(e.left-t.right)},g=t.calculLeftScore=function(e,t){return Math.abs(e.top-t.top)+Math.abs(e.right-t.left)},y=t.calculUpScore=function(e,t){return Math.abs(e.down-t.top)+Math.abs(e.left-t.left)},v=t.calculDowScore=function(e,t){return Math.abs(e.top-t.down)+Math.abs(e.left-t.left)}},function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(r)return r;if(e[t].type===a.CAROUSEL_TYPE)return e[t].selectedId;var n=e[t],o=n.position,c=n.enterStrategy,l=n.selectedId,s=n.selector,f=n.elements,d=o===a.VERTICAL?"top":"left";switch(c){case a.EXIT_STRATEGY_MEMORY:return l;case a.EXIT_STRATEGY_MIRROR:return i(t,s,d,e);case a.EXIT_STRATEGY_START:return u(s,d,t);default:return f[0].id}}function i(e,t,r,n){var o=(0,c.getDomElement)(n.current.selectedId),i=o?o.getBoundingClientRect()[r]:0,u=(0,c.getCurrentChildren)((0,c.getDomElement)(e),t).map(function(e){return{id:e.id,diff:Math.abs(e.getBoundingClientRect()[r]-i)}}).sort(function(e,t){return e.diff-t.diff});return u[0].id}function u(e,t,r){var o=(0,c.getDomElement)(r),i=o.getBoundingClientRect()[t],u=(0,c.getCurrentChildren)(o,e).map(function(e){return n({id:e.id},t,e.getBoundingClientRect()[t]-i)}).filter(function(e){return e[t]>=0}).sort(function(e,r){return e[t]-r[t]});return u[0].id}Object.defineProperty(t,"__esModule",{value:!0}),t.findIdByStrategy=o,t.findMirrorExitId=i,t.findStartExitId=u;var a=r(1),c=r(3)},function(e,r){e.exports=t},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t._blocks=t.unblockExcept=t.blockExcept=t.unblock=t.block=t.resetCarousel=t.resetBinder=t.updateBinder=t.activeBinder=t.catcher=t.getBinderSelectedId=t.getBinderMarginTop=t.getBinderMarginLeft=t.isBinderActive=t.isCurrentBinder=t.keysSelector=t.keysReducer=t.Carousel=t.Binder=t.Keys=t.keysInit=t.config=void 0;var o=r(12),i=n(o),u=r(14),a=n(u),c=r(13),l=n(c),s=r(8),f=n(s),d=r(0),p=r(15),h=r(2),b=r(16),g=r(4),y=n(g);t.config=d.getConfig,t.keysInit=d._init,t.Keys=a.default,t.Binder=i.default,t.Carousel=l.default,t.keysReducer=p._keyReducer,t.keysSelector=b._selector,t.isCurrentBinder=b._isCurrentBinder,t.isBinderActive=b._isBinderActive,t.getBinderMarginLeft=b._getBinderMarginLeft,t.getBinderMarginTop=b._getBinderMarginTop,t.getBinderSelectedId=b._getBinderSelectedId,t.catcher=f.default,t.activeBinder=h._activeBinder,t.updateBinder=h._updateBinder,t.resetBinder=h._resetBinder,t.resetCarousel=h._resetCarousel,t.block=y.default.block,t.unblock=y.default.unblock,t.blockExcept=y.default.blockExcept,t.unblockExcept=y.default.unblockExcept,t._blocks=y.default}])});