!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("React"),require("ReactDOM")):"function"==typeof define&&define.amd?define(["React","ReactDOM"],t):"object"==typeof exports?exports.ReactKeys=t(require("React"),require("ReactDOM")):e.ReactKeys=t(e.React,e.ReactDOM)}(this,function(e,t){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return e[r].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.keys=t.keysInit=t.KeyBinder=t.register=void 0;var o=n(1),i=r(o),s=n(8),u=n(10),c=n(6);t.register=s._register,t.KeyBinder=i["default"],t.keysInit=u._init,t.keys={UP:c.UP,DOWN:c.DOWN,LEFT:c.LEFT,RIGHT:c.RIGHT,ENTER:c.ENTER}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function u(e){return!!(e&&e.constructor&&e.call&&e.apply)}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(2),f=r(l),a=n(3),p=r(a),d=n(4),h=n(6),y=n(7),v=n(9),m=n(10),k=function(e){function t(e){o(this,t);var n=i(this,Object.getPrototypeOf(t).call(this,e));return n.elements=[],n.prevFocusedElement=null,n.nextFocusedElement=null,n.listenerId=(0,m.addListener)(n.keysHandler,n),n}return s(t,e),c(t,[{key:"executeFunctionAction",value:function(e){e.call(this,this.nextFocusedElement||{},this.prevFocusedElement||{},this.props.context)}},{key:"keysHandler",value:function(e){if(this.props.active&&!(0,v.isBlocked)())switch((0,v.block)(),e){case h.LEFT:this.props.keys.onLeftKey&&u(this.props.keys.onLeftKey)&&(this._giveFocusTo("left"),this.executeFunctionAction(this.props.keys.onLeftKey));break;case h.UP:this.props.keys.onUpKey&&u(this.props.keys.onUpKey)&&(this._giveFocusTo("up"),this.executeFunctionAction(this.props.keys.onUpKey));break;case h.DOWN:this.props.keys.onDownKey&&u(this.props.keys.onDownKey)&&(this._giveFocusTo("down"),this.executeFunctionAction(this.props.keys.onDownKey));break;case h.RIGHT:this.props.keys.onRightKey&&u(this.props.keys.onRightKey)&&(this._giveFocusTo("right"),this.executeFunctionAction(this.props.keys.onRightKey));break;case h.ENTER:this.props.keys.onEnterKey&&u(this.props.keys.onEnterKey)&&this.executeFunctionAction(this.props.keys.onEnterKey)}}},{key:"refreshState",value:function(){var e=p["default"].findDOMNode(this),t={};switch(this.props.mode){case"strape":t=(0,y.refresh)(e,this.elements,this.props.wrapper,this.props.wChildren);break;default:t=(0,d.refresh)(e,this.elements,this.props.selector,this.props.focusedElementId)}var n=t,r=n.elements,o=n.selectedElement;this.elements=r,this.nextFocusedElement=o||this.nextFocusedElement}},{key:"_giveFocusTo",value:function(e){var t=this;return this.prevFocusedElement=this.nextFocusedElement,this.prevFocusedElement?(this.prevFocusedElement[e]&&(this.nextFocusedElement=this.elements.find(function(n){return n.id===t.prevFocusedElement[e]})),this.nextFocusedElement):null}},{key:"componentDidMount",value:function(){this.refreshState()}},{key:"componentDidUpdate",value:function(){this.refreshState()}},{key:"componentWillUnmount",value:function(){(0,m.removeListener)(this.listenerId)}},{key:"render",value:function(){return f["default"].createElement("div",null,this.props.children)}}],[{key:"propTypes",get:function(){return{mode:l.PropTypes.string,focusedElementId:l.PropTypes.string,context:l.PropTypes.object,keys:l.PropTypes.object,wrapper:l.PropTypes.string,wChildren:l.PropTypes.string}}},{key:"defaultProps",get:function(){return{keys:{},mode:"mosaic",active:!0,selector:"li",wrapper:"ul",wChildren:"li"}}}]),t}(l.Component);t["default"]=k},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";function r(e){var t=e.getBoundingClientRect();return{id:e.id,left:t.left,top:t.top}}function o(e,t){var n=t.filter(function(t){return t.top===e.top&&t.left>e.left}).sort(function(e,t){return e.left-t.left});return n[0]?n[0].id:void 0}function i(e,t){var n=t.filter(function(t){return t.top===e.top&&t.left<e.left}).sort(function(e,t){return t.left-e.left});return n[0]?n[0].id:void 0}function s(e,t){var n=t.filter(function(t){return t.left<=e.left&&t.top>e.top}).sort(function(e,t){return e.top-t.top-(e.left-t.left)});return n[0]?n[0].id:void 0}function u(e,t){var n=t.filter(function(t){return t.left<=e.left&&t.top<e.top}).sort(function(e,t){return t.top+t.left-(e.top+e.left)});return n[0]?n[0].id:void 0}function c(e){var t=[],n=e.map(r);return e.forEach(function(e){var r=n.find(function(t){return t.id===e.id}),c={id:e.id,left:i(r,n),right:o(r,n),up:u(r,n),down:s(r,n)};t.push(c)}),t}function l(e,t){var n=e.querySelectorAll(t);return[].slice.call(n)}function f(e,t){var n=t?e.find(function(e){return e.id===t}):null;return n||e[0]}function a(e,t,n,r){var o=l(e,n);if(!(0,p.hasDiff)(o,t))return{elements:t,selectedElement:null};var i=c(o);return{elements:i,selectedElement:f(i,r)}}Object.defineProperty(t,"__esModule",{value:!0}),t.findRightElement=o,t.findLeftElement=i,t.findDownElement=s,t.findUpElement=u,t.refresh=a;var p=n(5)},function(e,t){"use strict";function n(e,t){return 0===e.length?!1:0===t.length?!0:t[0].id!==e[0].id||t.length!==e.length}Object.defineProperty(t,"__esModule",{value:!0}),t.hasDiff=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LEFT=37,t.UP=38,t.RIGHT=39,t.DOWN=40,t.ENTER=13,t.BACK=8},function(e,t,n){"use strict";function r(e,t,n){var r=e.querySelector(t).getBoundingClientRect(),o=[],i=0;return n.forEach(function(e,t){var s=e.getBoundingClientRect();s.width+s.left-r.left>r.width+i&&(i=s.left-r.left);var u={id:e.id,marginLeft:i,right:t+1===n.length?n[0].id:n[t+1].id,left:0>t-1?n[n.length-1].id:n[t-1].id};o.push(u)}),o}function o(e,t){var n=e.querySelectorAll(t);return n?[].slice.call(n):[]}function i(e,t,n,i){var c=o(e,i);if(!(0,u.hasDiff)(c,t))return{elements:t,selectedElement:null};var l=r(e,n,c);return(0,s.trigger)("strape:update",l),{elements:l,selectedElement:l[0]}}Object.defineProperty(t,"__esModule",{value:!0}),t.refresh=i;var s=n(8),u=n(5);t["default"]=r},function(e,t){"use strict";function n(e,t){o.push({event:e,callback:t})}function r(e,t){var n=!0,r=!1,i=void 0;try{for(var s,u=o[Symbol.iterator]();!(n=(s=u.next()).done);n=!0){var c=s.value;c.event===e&&c.callback(t)}}catch(l){r=!0,i=l}finally{try{!n&&u["return"]&&u["return"]()}finally{if(r)throw i}}}Object.defineProperty(t,"__esModule",{value:!0}),t._register=n,t.trigger=r;var o=t.keysActions=[]},function(e,t){"use strict";function n(){o=!0,setTimeout(function(){return o=!1},10)}function r(){return o}Object.defineProperty(t,"__esModule",{value:!0}),t.block=n,t.isBlocked=r;var o=!1},function(e,t){"use strict";function n(e){var t=e.keyCode?e.keyCode:e,n=!0,r=!1,o=void 0;try{for(var i,u=s[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var c=i.value;c.callback.call(c.context,t)}}catch(l){r=!0,o=l}finally{try{!n&&u["return"]&&u["return"]()}finally{if(r)throw o}}}function r(e){e?e(n):document.addEventListener("keydown",n)}function o(e,t){var n=Math.random().toString(36).substring(2,5);return s.push({id:n,callback:e,context:t}),n}function i(e){t.keysListeners=s=s.filter(function(t){return t.id!==e})}Object.defineProperty(t,"__esModule",{value:!0}),t.cb=n,t._init=r,t.addListener=o,t.removeListener=i;var s=t.keysListeners=[]}])});